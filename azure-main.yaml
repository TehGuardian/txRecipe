$engine: 3
$onesync: on
$minFxVersion: 7290
name: Azure Framework
description: The official recipe for Azure Framework.
author: Azure(TheStoicBear)

tasks:

  ############################################################
  # ğŸ“¦ Core Server Resources (Default + Dependencies)
  ############################################################

  # ğŸŒ Default CFX Resources
  - action: download_file
    url: https://github.com/citizenfx/cfx-server-data/archive/refs/heads/master.zip
    path: ./tmp/cfx-server-data.zip
  - action: unzip
    src: ./tmp/cfx-server-data.zip
    dest: ./resources/[default]

  # ğŸ¤ pma-voice (Voice System)
  - action: download_file
    url: https://github.com/AvarianKnight/pma-voice/archive/refs/heads/main.zip
    path: ./tmp/pma-voice.zip
  - action: unzip
    src: ./tmp/pma-voice.zip
    dest: ./resources/[dependencies]/pma-voice

  ############################################################
  # ğŸ—„ï¸ Database Setup & Cleanup
  ############################################################

  - action: move_path
    src: ./tmp/azureframework/server.cfg
    dest: ./server.cfg

  # ğŸ”— Connect Database
  - action: connect_database

  # ğŸ’¾ oxmysql (Database Wrapper)
  - action: download_file
    url: https://github.com/overextended/oxmysql/releases/latest/download/oxmysql.zip
    path: ./tmp/oxmysql.zip
  - action: unzip
    src: ./tmp/oxmysql.zip
    dest: ./resources/[dependencies]

  # ğŸ¯ ox_target (Targeting System)
  - action: download_file
    url: https://github.com/overextended/ox_target/releases/latest/download/ox_target.zip
    path: ./tmp/ox_target.zip
  - action: unzip
    src: ./tmp/ox_target.zip
    dest: ./resources/[dependencies]


  ############################################################
  # ğŸŒ€ Azure Framework Core
  ############################################################

  # ğŸ›ï¸ Azure-Framework (fetch the Azure-Framework folder directly)
  - action: download_github
    src: https://github.com/Azure-Framework/Az-Framework
    ref: main
    subpath: Azure-Framework
    dest: ./resources/Azure-Framework


  ############################################################
  # âš¡ Azure Framework Resources
  ############################################################

  # ğŸ”‘ Az-Admin (Admin System)
  - action: download_file
    url: https://github.com/Azure-Framework/Az-Admin/archive/refs/heads/main.zip
    path: ./tmp/Az-Admin.zip
  - action: unzip
    src: ./tmp/Az-Admin.zip
    dest: ./resources/[framework]/Az-Admin

  # ğŸ‘¤ Az-CharacterUI (Character UI)
  - action: download_file
    url: https://github.com/Azure-Framework/Az-CharacterUI/archive/refs/heads/main.zip
    path: ./tmp/Az-CharacterUI.zip
  - action: unzip
    src: ./tmp/Az-CharacterUI.zip
    dest: ./resources/[framework]/Az-CharacterUI

  # ğŸ’³ Az-Banking (Banking System)
  - action: download_file
    url: https://github.com/Azure-Framework/Az-Banking/archive/refs/heads/main.zip
    path: ./tmp/Az-Banking.zip
  - action: unzip
    src: ./tmp/Az-Banking.zip
    dest: ./resources/[framework]/Az-Banking

  # ğŸš” Az-PoliceMenu (Police Menu)
  - action: download_file
    url: https://github.com/Azure-Framework/Az-PoliceMenu/archive/refs/heads/main.zip
    path: ./tmp/Az-PoliceMenu.zip
  - action: unzip
    src: ./tmp/Az-PoliceMenu.zip
    dest: ./resources/[framework]/Az-PoliceMenu

  # ğŸ“¦ Az-Amazon (Amazon Job)
  - action: download_file
    url: https://github.com/Azure-Framework/Az-Amazon/archive/refs/heads/master.zip
    path: ./tmp/Az-Amazon.zip
  - action: unzip
    src: ./tmp/Az-Amazon.zip
    dest: ./resources/[framework]/Az-Amazon

  # ğŸ“Š Az-LogJob (Job Logger)
  - action: download_file
    url: https://github.com/Azure-Framework/Az-LogJob/archive/refs/heads/main.zip
    path: ./tmp/Az-LogJob.zip
  - action: unzip
    src: ./tmp/Az-LogJob.zip
    dest: ./resources/[framework]/Az-LogJob

  # ğŸ—‘ï¸ Az-GarbageJob (Garbage Job)
  - action: download_file
    url: https://github.com/Azure-Framework/Az-GarbageJob/archive/refs/heads/main.zip
    path: ./tmp/Az-GarbageJob.zip
  - action: unzip
    src: ./tmp/Az-GarbageJob.zip
    dest: ./resources/[framework]/Az-GarbageJob

  # â˜• Az-CoffeeJob (Coffee Job)
  - action: download_file
    url: https://github.com/Azure-Framework/Az-CoffeeJob/archive/refs/heads/main.zip
    path: ./tmp/Az-CoffeeJob.zip
  - action: unzip
    src: ./tmp/Az-CoffeeJob.zip
    dest: ./resources/[framework]/Az-CoffeeJob

  # ğŸšš Az-DrugTraffic (Drug Trafficking Job)
  - action: download_file
    url: https://github.com/Azure-Framework/Az-DrugTraffic/archive/refs/heads/main.zip
    path: ./tmp/Az-DrugTraffic.zip
  - action: unzip
    src: ./tmp/Az-DrugTraffic.zip
    dest: ./resources/[framework]/Az-DrugTraffic

  # â›“ï¸ Az-Jailing (Jailing System)
  - action: download_file
    url: https://github.com/Azure-Framework/Az-Jailing/archive/refs/heads/main.zip
    path: ./tmp/Az-Jailing.zip
  - action: unzip
    src: ./tmp/Az-Jailing.zip
    dest: ./resources/[framework]/Az-Jailing

  # ğŸš¦ Az-DMV (DMV System)
  - action: download_file
    url: https://github.com/Azure-Framework/Az-DMV/archive/refs/heads/main.zip
    path: ./tmp/Az-DMV.zip
  - action: unzip
    src: ./tmp/Az-DMV.zip
    dest: ./resources/[framework]/Az-DMV

  # ğŸš“ Az-5PD (5PD Integration)
  - action: download_file
    url: https://github.com/Azure-Framework/Az-5PD/archive/refs/heads/main.zip
    path: ./tmp/Az-5PD.zip
  - action: unzip
    src: ./tmp/Az-5PD.zip
    dest: ./resources/[framework]/Az-5PD

  # ğŸ§¹ Cleanup Temporary Files
  - action: remove_path
    path: ./tmp
